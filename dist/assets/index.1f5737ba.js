var e=Object.assign;import{d as t,p as n,a as o,o as r,c as a,F as l,r as s,t as p,w as i,b as c,u,e as d,f as m,g,h as f,i as y,j as h,k as v,l as C,m as x,n as I,q as b,s as w,V as k,A as V}from"./vendor.df79aaec.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const o=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,a)=>{const l=new URL(e,o);if(self[t].moduleMap[l])return n(self[t].moduleMap[l]);const s=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),p=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){a(new Error(`Failed to import: ${e}`)),r(p)},onload(){n(self[t].moduleMap[l]),r(p)}});document.head.appendChild(p)})),self[t].moduleMap={}}}("/drag-demo/dist/assets/");var z=t({name:"tz-left",props:{componentConfig:{type:Array,required:!0,default:()=>[]}},setup:e=>({handleDrag:(t,n)=>{let o=e.componentConfig&&e.componentConfig[n];o&&(o.style.top=t.offsetY),o&&(o.style.left=t.offsetX),t.dataTransfer.setData("componentType",JSON.stringify(o)),t.target.style.opacity="0.5"},handleDragEnd:e=>{e.target.style.opacity="1"}})});const M=i("data-v-628b13f5");n("data-v-628b13f5");const S={class:"left"};o();const _=M(((e,t,n,o,i,c)=>(r(),a("div",S,[(r(!0),a(l,null,s(e.componentConfig,((n,o)=>(r(),a("div",{key:o,class:"item",onDragstart:t=>e.handleDrag(t,o),onDragend:t[1]||(t[1]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),draggable:"true"},p(n.title),41,["onDragstart"])))),128))]))));z.render=_,z.__scopeId="data-v-628b13f5";const D={left:{value:"X 坐标"},top:{value:"Y 坐标"},width:{value:"宽"},height:{value:"高"},lineHeight:{value:"行高"},backgroundColor:{value:"背景色",type:"color"},color:{value:"颜色",type:"color"},text:{value:"文本",type:"textarea"},type:{value:"类型",type:"select"},disabled:{value:"是否禁用",type:"switch"},url:{value:"链接"},plain:{value:"是否朴素",type:"switch"},title:{value:"标题"},leftText:{value:"左侧文字"},rightText:{value:"右侧文字"},border:{value:"边框",type:"switch"},leftArrow:{value:"左侧箭头",type:"switch"},zIndex:{value:"z-index",type:"number"}},U={"van-button":{type:{value:"类型",type:"select",options:["primary","success","warning","danger"]}},tzText:{align:{value:"对齐方式",type:"select",options:["left","right","center"]}}};var L=t({name:"tzRight",setup(){const t=u();return{currentConfig:c((()=>t.getters.getCurrentComponent?t.getters.getCurrentComponent:t.getters.getCanvas)),getConfigMap:c((()=>{var n;const o=null==(n=t.getters.getCurrentComponent)?void 0:n.component;return e(e({},D),U[o])}))}}});const O=i("data-v-35d13950");n("data-v-35d13950");const E={class:"right"};o();const j=O(((e,t,n,o,p,i)=>{const c=d("el-color-picker"),u=d("el-input"),g=d("el-form-item"),f=d("el-switch"),y=d("el-input-number"),h=d("el-option"),v=d("el-select"),C=d("el-form");return r(),a("div",E,[e.currentConfig?(r(),a(C,{key:0,size:"mini","label-position":"right","label-width":"76px"},{default:O((()=>[(r(!0),a(l,null,s(Object.keys(e.currentConfig.style),(t=>(r(),a(l,null,[e.getConfigMap[t]?(r(),a(g,{key:t,label:`${e.getConfigMap[t].value}:`},{default:O((()=>["color"===e.getConfigMap[t].type?(r(),a(c,{key:0,modelValue:e.currentConfig.style[t],"onUpdate:modelValue":n=>e.currentConfig.style[t]=n},null,8,["modelValue","onUpdate:modelValue"])):(r(),a(u,{key:1,modelValue:e.currentConfig.style[t],"onUpdate:modelValue":n=>e.currentConfig.style[t]=n,modelModifiers:{lazy:!0,trim:!0}},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1032,["label"])):m("",!0)],64)))),256)),(r(!0),a(l,null,s(Object.keys(e.currentConfig.props),(t=>(r(),a(l,null,[e.getConfigMap[t]?(r(),a(g,{key:t,label:`${e.getConfigMap[t].value}:`},{default:O((()=>["color"===e.getConfigMap[t].type?(r(),a(c,{key:0,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":n=>e.currentConfig.props[t]=n},null,8,["modelValue","onUpdate:modelValue"])):"switch"===e.getConfigMap[t].type?(r(),a(f,{key:1,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":n=>e.currentConfig.props[t]=n},null,8,["modelValue","onUpdate:modelValue"])):"number"===e.getConfigMap[t].type?(r(),a(y,{key:2,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":n=>e.currentConfig.props[t]=n,min:0,max:999,label:"描述文字"},null,8,["modelValue","onUpdate:modelValue"])):"select"===e.getConfigMap[t].type?(r(),a(v,{key:3,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":n=>e.currentConfig.props[t]=n,placeholder:"请选择"},{default:O((()=>[(r(!0),a(l,null,s(e.getConfigMap[t].options,(e=>(r(),a(h,{key:e,value:e},null,8,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(r(),a(u,{key:4,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":n=>e.currentConfig.props[t]=n,modelModifiers:{lazy:!0,trim:!0},type:e.getConfigMap[t].type||"text"},null,8,["modelValue","onUpdate:modelValue","type"]))])),_:2},1032,["label"])):m("",!0)],64)))),256))])),_:1})):m("",!0)])}));L.render=j,L.__scopeId="data-v-35d13950";var B=t({name:"componentBox",props:{componentsConfig:{type:Object,required:!0,default:()=>({})},index:{type:Number,default:0}},setup(e,t){const n=g(null),o=u();f((()=>{const t=n.value.getBoundingClientRect(),r=c((()=>{o.getters.getCanvas.style.width})),a=t.height?t.height+"px":"50px",l=t.width?t.width+"px":r;o.commit("updateStyle",{index:e.index,style:{height:a,width:l}})}));return{component:n,activeComponent:n=>{t.emit("onComponent",e.index),n.stopPropagation()}}}});const P=i("data-v-2b2e9592")(((e,t,n,o,l,s)=>(r(),a("div",{class:"item",style:e.componentsConfig.style,ref:"component",onClick:t[1]||(t[1]=(...t)=>e.activeComponent&&e.activeComponent(...t))},[y(e.$slots,"default")],4))));var T,R;B.render=P,B.__scopeId="data-v-2b2e9592",(R=T||(T={})).lt="lt",R.rt="rt",R.lb="lt",R.rb="rt",R.l="l",R.t="t",R.r="r",R.b="b";const X={lt:{left:"-4px",top:"-4px",cursor:"nw-resize"},rt:{right:"-4px",top:"-4px",cursor:"ne-resize"},lb:{left:"-4px",bottom:"-4px",cursor:"sw-resize"},rb:{right:"-4px",bottom:"-4px",cursor:"se-resize"},l:{left:"-4px",top:"50%",transform:"translateY(-50%)",cursor:"w-resize"},t:{left:"50%",transform:"translateX(-50%)",top:"-4px",cursor:"n-resize"},r:{right:"-4px",top:"50%",transform:"translateY(-50%)",cursor:"e-resize"},b:{left:"50%",transform:"translateX(-50%)",bottom:"-4px",cursor:"s-resize"}},Y={lt(t,n,o,r){const a=t.y-n.y,l=t.x-n.x,s=parseInt(o.left)+parseInt(o.width),p=parseInt(o.top)+parseInt(o.height);let i=parseInt(o.left)-l,c=parseInt(o.top)-a,u=parseInt(o.width)+l,d=parseInt(o.height)+a;return u=u<2?2:u>s?s:u,d=d<2?2:d>p?p:d,i=i<0?0:i>s-2?s-2:i,c=c<0?0:c>p-2?p-2:c,e(e({},o),{left:i+"px",top:c+"px",height:d+"px",width:u+"px"})},rt(t,n,o,r){const a=t.y-n.y,l=n.x-t.x,s=parseInt(r.width)-parseInt(o.left),p=parseInt(o.top)+parseInt(o.height);let i=parseInt(o.top)-a,c=parseInt(o.width)+l,u=parseInt(o.height)+a;return c=c<2?2:c>s?s:c,u=u<2?2:u>p?p:u,i=i<0?0:i>p-2?p-2:i,e(e({},o),{top:i+"px",height:u+"px",width:c+"px"})},lb(t,n,o,r){const a=n.y-t.y,l=t.x-n.x,s=parseInt(o.left)+parseInt(o.width),p=parseInt(r.height)-parseInt(o.top);let i=parseInt(o.left)-l,c=parseInt(o.width)+l,u=parseInt(o.height)+a;return c=c<2?2:c>s?s:c,u=u<2?2:u>p?p:u,i=i<0?0:i>s-2?s-2:i,e(e({},o),{left:i+"px",height:u+"px",width:c+"px"})},rb(t,n,o,r){const a=n.y-t.y,l=n.x-t.x,s=parseInt(r.width)-parseInt(o.left),p=parseInt(r.height)-parseInt(o.top);let i=parseInt(o.width)+l,c=parseInt(o.height)+a;return i=i<2?2:i>s?s:i,c=c<2?2:c>p?p:c,e(e({},o),{height:c+"px",width:i+"px"})},l(t,n,o,r){const a=t.x-n.x,l=parseInt(o.left)+parseInt(o.width);let s=parseInt(o.left)-a,p=parseInt(o.width)+a;return p=p<2?2:p>l?l:p,s=s<0?0:s>l-2?l-2:s,e(e({},o),{left:s+"px",width:p+"px"})},t(t,n,o,r){const a=t.y-n.y,l=parseInt(o.top)+parseInt(o.height);let s=parseInt(o.top)-a,p=parseInt(o.height)+a;return p=p<2?2:p>l?l:p,s=s<0?0:s>l-2?l-2:s,e(e({},o),{top:s+"px",height:p+"px"})},r(t,n,o,r){const a=n.x-t.x;let l=parseInt(o.width)+a;const s=parseInt(r.width)-parseInt(o.left);return l=l<2?2:l>s?s:l,e(e({},o),{width:l+"px"})},b(t,n,o,r){const a=n.y-t.y;let l=parseInt(o.height)+a;const s=parseInt(r.height)-parseInt(o.top);return l=l<2?2:l>s?s:l,e(e({},o),{height:l+"px"})}};function $(){const t=u();return(n,o)=>{const r=c((()=>t.getters.getCanvas)),a=c((()=>t.getters.getCurrentComponent)).value,l={x:o.clientX,y:o.clientY},s=e({},a.style),p=e=>{e.stopPropagation();const o={x:e.clientX,y:e.clientY},a=function(e,t,n,o,r){return Y[e](t,n,o,r)}(n,l,o,s,r.value.style);t.commit("updateCurrentStyle",a)},i=e=>{e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",i)}}const A=e=>{const t=parseInt(e.style.left),n=parseInt(e.style.top);return{left:t,top:n,right:t+parseInt(e.style.width),bottom:n+parseInt(e.style.height),xcenter:n+parseInt(e.style.height)/2,ycenter:t+parseInt(e.style.width)/2}},N=(e,t)=>Math.abs(e-t)<=3;var H=t({name:"dragShape",setup(){const t=u(),n=g(null),o=g(null),r=c((()=>t.getters.getCurrentComponent)),a=$();return{xline:n,yline:o,pointStyle:X,currentComponentConfig:r,onPointMouseDown:a,onClickPoint:()=>{},onShapeMove:r=>{const a=function(t,n){const o=c((()=>n.getters.getCanvas)).value.style,r=c((()=>n.getters.getCurrentComponent)).value,a=e({},r.style),l=t.clientX,s=t.clientY;return function(t){t.stopPropagation();const r=t.clientX,p=t.clientY,i=r-l,c=p-s,u=parseInt(a.width),d=parseInt(a.height),m=parseInt(o.width)-u/2,g=parseInt(o.height)-d/2;let f=parseInt(a.left)+i,y=parseInt(a.top)+c;f=-f>u/2?-u/2:f>m?m:f,y=-y>d/2?-d/2:y>g?g:y;const h=e(e({},a),{left:f+"px",top:y+"px"});n.commit("updateCurrentStyle",h)}}(r,t),l=(e=>{const t=c((()=>e.getters.getComponents)).value,n=c((()=>e.getters.getCurrentComponent)).value,o=[],r={left:[0,parseInt(e.getters.getCanvas.style.width)],top:[0,parseInt(e.getters.getCanvas.style.height)]};return t.forEach((e=>{e!==n&&o.push(A(e))})),o.forEach((e=>{r.left.push(e.left,e.ycenter,e.right),r.top.push(e.top,e.xcenter,e.bottom)})),(t,o)=>{const a=A(n),l={},s={left:[a.left,a.ycenter,a.right],top:[a.top,a.xcenter,a.bottom],left2line:[0,parseInt(n.style.width)/2,parseInt(n.style.width)],top2line:[0,parseInt(n.style.height)/2,parseInt(n.style.height)]};for(var p=0;p<s.left.length;p++){const e=s.left[p];if(l.left=r.left.find((t=>N(e,t))),void 0!==l.left){l.leftLine=l.left,l.left-=s.left2line?s.left2line[p]:0;break}}for(p=0;p<s.top.length;p++){const e=s.top[p];if(l.top=r.top.find((t=>N(e,t))),void 0!==l.top){l.topLine=l.top,l.top-=s.top2line?s.top2line[p]:0;break}}o&&t&&(o.style.display="none",t.style.display="none",void 0!==l.left&&(o.style.display="block",o.style.left=l.leftLine+"px",e.commit("updateCurrentStyle",{left:l.left+"px"})),void 0!==l.top&&(t.style.display="block",t.style.top=l.topLine+"px",e.commit("updateCurrentStyle",{top:l.top+"px"})))}})(t),s=e=>{a(e),l(n.value,o.value)},p=()=>{const e=n.value,t=o.value;e&&(e.style.display="none"),t&&(t.style.display="none"),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",p)}}}});const q=i("data-v-0a6f1c7f");n("data-v-0a6f1c7f");const F={class:"line"},J={class:"xline",ref:"xline"},K={class:"yline",ref:"yline"};o();const W=q(((e,t,n,o,p,i)=>(r(),a(l,null,[h("div",F,[h("div",J,null,512),h("div",K,null,512)]),h("div",{class:"dragWrap",style:e.currentComponentConfig.style,onMousedown:t[2]||(t[2]=v(((...t)=>e.onShapeMove&&e.onShapeMove(...t)),["stop","prevent"])),onClick:t[3]||(t[3]=v((e=>e),["stop","prevent"]))},[(r(!0),a(l,null,s(Object.keys(e.pointStyle),(n=>(r(),a("div",{class:n,style:e.pointStyle[n],onMousedown:v((t=>e.onPointMouseDown(n,t)),["stop","prevent"]),onClick:t[1]||(t[1]=v(((...t)=>e.onClickPoint&&e.onClickPoint(...t)),["stop","prevent"]))},null,46,["onMousedown"])))),256))],36)],64))));H.render=W,H.__scopeId="data-v-0a6f1c7f";var G=t({name:"tzContent",components:{componentBox:B,dragShape:H},setup(){const e=u(),t=c((()=>e.getters.getComponents)),n=c((()=>e.getters.getCurrentComponent));return{canvasStyle:c((()=>e.getters.getCanvas.style)),components:t,handleDrop:t=>{t.preventDefault();const n=JSON.parse(t.dataTransfer.getData("componentType"));n.style.top=t.offsetY-n.style.top+"px",n.style.left=t.offsetX-n.style.left+"px",n.id=`${Number(Math.random().toString().substr(3,length)+Date.now()).toString(36)}`,e.commit("addComponents",n)},handleDragOver:e=>{e.preventDefault()},onComponent:n=>{"content"!==n&&t?(console.log(t.value[n]),e.commit("addCurrentComponent",t.value[n])):e.commit("addCurrentComponent",null)},deleteComponent:()=>{e.commit("deleteCurrentComponent")},currentComponent:n}}});const Q=i("data-v-2aa65915");n("data-v-2aa65915");const Z={class:"content"};o();const ee=Q(((e,t,n,o,p,i)=>{const c=d("component-box"),u=d("drag-shape");return r(),a("div",Z,[h("div",{class:"canvas",onDrop:t[1]||(t[1]=(...t)=>e.handleDrop&&e.handleDrop(...t)),onDragover:t[2]||(t[2]=(...t)=>e.handleDragOver&&e.handleDragOver(...t)),onClick:t[3]||(t[3]=v((t=>e.onComponent("content")),["stop"])),style:e.canvasStyle,tabIndex:"0",onKeyup:t[4]||(t[4]=x(((...t)=>e.deleteComponent&&e.deleteComponent(...t)),["delete"]))},[(r(!0),a(l,null,s(e.components,((t,n)=>(r(),a(c,{key:t.id,"components-config":t,index:n,onOnComponent:e.onComponent},{default:Q((()=>[(r(),a(C(t.component),t.props,null,16))])),_:2},1032,["components-config","index","onOnComponent"])))),128)),e.currentComponent?(r(),a(u,{key:0})):m("",!0)],36)])}));G.render=ee,G.__scopeId="data-v-2aa65915";const te={tzBox:{title:"矩形",style:{width:"100px",height:"100px"}},tzButton:{title:"按钮"},tzText:{title:"文本"},VanButton:{title:"vant-按钮",props:{text:"按钮",block:!0}},VanNavBar:{title:"nav导航栏",style:{width:"100%"},props:{title:"标题",leftText:"返回",zIndex:1}}};var ne=t({name:"App",components:{tzLeft:z,tzContent:G,tzRight:L},setup(){const t=I();return{config:(t=>{const n=[],o=Object.keys(t).filter((e=>te[e])),r=e=>{console.log(e);const t=e.props;let n={};if(!e.props)return[];for(const o of Object.keys(t))n[o]="function"==typeof t[o]?t[o]():t[o].default;return n};for(let a=0;a<o.length;a++){const l=o[a],s=t[l],p=te[l]?te[l]:{};n.push(e(e({component:s.name},p),{props:e(e({},r(s)),p.props?p.props:{}),style:e({},p.style?p.style:{})}))}return n})(t&&t.appContext.components)}}});ne.render=function(e,t,n,o,s,p){const i=d("tz-left"),c=d("tz-content"),u=d("tz-right");return r(),a(l,null,[h(i,{"component-config":e.config},null,8,["component-config"]),h(c),h(u)],64)};const oe=b({state:()=>({canvasConfig:{style:{width:"414px",height:"736px",backgroundColor:"#fff"},props:{}},components:[],currentComponent:null}),mutations:{updateCanvasConfig(t,n){t.canvasConfig=e(e({},t.canvasConfig),n)},addComponents(e,t){e.components.push(t)},updateStyle(t,{index:n,style:o}){const r=t.components[n].style;t.components[n].style=e(e({},r),o)},updateCurrentStyle(t,n){if(!t.currentComponent)return;const o=t.currentComponent.style;t.currentComponent.style=e(e({},o),n)},deleteCurrentComponent(e){if(e.currentComponent&&!(e.components.length<=0))for(let t=0;t<e.components.length;t++){if(e.components[t]===e.currentComponent)return e.components.splice(t,1),void oe.commit("addCurrentComponent",null)}},addCurrentComponent(e,t){e.currentComponent=t}},getters:{getComponents:e=>e.components,getCurrentComponent:e=>e.currentComponent,getCanvas:e=>e.canvasConfig}});var re=t({name:"tzText",props:{text:{type:String,default:"请输入文字"},color:{type:String,default:"#333"},align:{type:String,default:"left"},lineHeight:{type:String,default:"20px"}},setup:e=>({style:c((()=>({color:e.color,textAlign:e.align,lineHeight:e.lineHeight})))})});const ae=i("data-v-39971272")(((e,t,n,o,l,s)=>(r(),a("div",{class:"text",style:e.style},p(e.text),5))));re.render=ae,re.__scopeId="data-v-39971272";var le=t({name:"tzBox",setup:()=>({})});const se=i("data-v-59cdd6ea");n("data-v-59cdd6ea");const pe={class:"box"};o();const ie=se(((e,t,n,o,l,s)=>(r(),a("div",pe))));le.render=ie,le.__scopeId="data-v-59cdd6ea";var ce=t({name:"tzButton",setup:()=>({})});const ue=i("data-v-709c6afb");n("data-v-709c6afb");const de={class:"btn"};o();const me=ue(((e,t,n,o,l,s)=>(r(),a("button",de," 按钮 "))));ce.render=me,ce.__scopeId="data-v-709c6afb";const ge=[le,ce,re];var fe={install:e=>{ge.forEach((t=>{e.component(t.name,t)}))}};const ye=w(ne);ye.use(oe),ye.use(k),ye.use(V),ye.use(fe),ye.mount("#app");
