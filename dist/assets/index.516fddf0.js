var e=Object.assign;import{u as t,d as l,g as a}from"./index.75413458.js";import{d as n,I as o,J as r,o as s,c as u,F as i,L as p,G as d,H as c,f as m,r as v,M as f,b as g,q as h,N as b,y,O as C,P as I,Q as x,g as w,R as V}from"./vendor.5ed3c467.js";import{r as k,_}from"./index.4a41d5c3.js";var U=n({name:"tz-left",props:{componentConfig:{type:Array,required:!0,default:()=>[]}},setup:e=>({handleDrag:(t,l)=>{let a=e.componentConfig&&e.componentConfig[l];a&&(a.style.top=t.offsetY),a&&(a.style.left=t.offsetX),t.dataTransfer.setData("componentType",JSON.stringify(a)),t.target.style.opacity="0.5"},handleDragEnd:e=>{e.target.style.opacity="1"}})});const O=c("data-v-0ecd8f38");o("data-v-0ecd8f38");const z={class:"left"};r();const D=O(((e,t,l,a,n,o)=>(s(),u("div",z,[(s(!0),u(i,null,p(e.componentConfig,((l,a)=>(s(),u("div",{key:a,class:"item",onDragstart:t=>e.handleDrag(t,a),onDragend:t[1]||(t[1]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),draggable:"true"},d(l.title),41,["onDragstart"])))),128))]))));U.render=D,U.__scopeId="data-v-0ecd8f38";const E={left:{value:"X 坐标"},top:{value:"Y 坐标"},width:{value:"宽"},height:{value:"高"},lineHeight:{value:"行高"},fixed:{value:"固定",type:"switch"},backgroundColor:{value:"背景色",type:"color"},color:{value:"颜色",type:"color"},text:{value:"文本",type:"textarea"},type:{value:"类型",type:"select"},disabled:{value:"是否禁用",type:"switch"},url:{value:"链接"},plain:{value:"是否朴素",type:"switch"},title:{value:"标题"},leftText:{value:"左侧文字"},rightText:{value:"右侧文字"},border:{value:"边框",type:"switch"},leftArrow:{value:"左侧箭头",type:"switch"},zIndex:{value:"z-index",type:"number"}};const L=e({tzText:{align:{value:"对齐方式",type:"select",options:["left","right","center"]}}},{"van-button":{type:{value:"类型",type:"select",options:["primary","success","warning","danger"]}}});var S=n({name:"rightStyle",setup(){const l=t();return{currentConfig:m((()=>l.getters.getCurrentComponent?l.getters.getCurrentComponent:l.getters.getCanvas)),getConfigMap:m((()=>{var t;const a=null==(t=l.getters.getCurrentComponent)?void 0:t.component;return e(e({},E),L[a])}))}}});const M=c("data-v-0b350db6"),R=M(((e,t,l,a,n,o)=>{const r=v("el-color-picker"),d=v("el-input"),c=v("el-form-item"),m=v("el-switch"),g=v("el-input-number"),h=v("el-option"),b=v("el-select"),y=v("el-form");return s(),u(y,{size:"mini","label-position":"right","label-width":"76px"},{default:M((()=>[(s(!0),u(i,null,p(Object.keys(e.currentConfig.style),(t=>(s(),u(i,null,[e.getConfigMap[t]?(s(),u(c,{key:t,label:`${e.getConfigMap[t].value}:`},{default:M((()=>["color"===e.getConfigMap[t].type?(s(),u(r,{key:0,modelValue:e.currentConfig.style[t],"onUpdate:modelValue":l=>e.currentConfig.style[t]=l},null,8,["modelValue","onUpdate:modelValue"])):(s(),u(d,{key:1,modelValue:e.currentConfig.style[t],"onUpdate:modelValue":l=>e.currentConfig.style[t]=l,modelModifiers:{lazy:!0,trim:!0}},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1032,["label"])):f("",!0)],64)))),256)),(s(!0),u(i,null,p(Object.keys(e.currentConfig.props),(t=>(s(),u(i,null,[e.getConfigMap[t]?(s(),u(c,{key:t,label:`${e.getConfigMap[t].value}:`},{default:M((()=>["color"===e.getConfigMap[t].type?(s(),u(r,{key:0,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":l=>e.currentConfig.props[t]=l},null,8,["modelValue","onUpdate:modelValue"])):"switch"===e.getConfigMap[t].type?(s(),u(m,{key:1,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":l=>e.currentConfig.props[t]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===e.getConfigMap[t].type?(s(),u(g,{key:2,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":l=>e.currentConfig.props[t]=l,min:0,max:999,label:"描述文字"},null,8,["modelValue","onUpdate:modelValue"])):"select"===e.getConfigMap[t].type?(s(),u(b,{key:3,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":l=>e.currentConfig.props[t]=l,placeholder:"请选择"},{default:M((()=>[(s(!0),u(i,null,p(e.getConfigMap[t].options,(e=>(s(),u(h,{key:e,value:e},null,8,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(s(),u(d,{key:4,modelValue:e.currentConfig.props[t],"onUpdate:modelValue":l=>e.currentConfig.props[t]=l,modelModifiers:{lazy:!0,trim:!0},type:e.getConfigMap[t].type||"text"},null,8,["modelValue","onUpdate:modelValue","type"]))])),_:2},1032,["label"])):f("",!0)],64)))),256))])),_:1})}));S.render=R,S.__scopeId="data-v-0b350db6";const B={in:{label:"进入",value:[]},out:{label:"退出",value:[]},other:{label:"其他",value:[]}},A=[{label:"强调",value:"Attention Seekers",children:[{label:"旋转",value:"justRotate"},{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"跳动",value:"pulse"},{label:"抖动",value:"shake"},{label:"摇摆",value:"swing"},{label:"橡皮圈",value:"rubberBand"},{label:"果冻",value:"jello"},{label:"晃动",value:"tada"},{label:"抖动",value:"wobble"}]},{label:"弹跳进入",value:"Bouncing Entrances",children:[{label:"弹跳进入",value:"bounceIn"},{label:"向下弹跳进入",value:"bounceInDown"},{label:"向右弹跳进入",value:"bounceInLeft"},{label:"向左弹跳进入",value:"bounceInRight"},{label:"向上弹跳进入",value:"bounceInUp"}]},{label:"弹跳退出",value:"Bouncing Exits",children:[{label:"弹跳退出",value:"bounceOut"},{label:"向下弹跳退出",value:"bounceOutDown"},{label:"向左弹跳退出",value:"bounceOutLeft"},{label:"向右弹跳退出",value:"bounceOutRight"},{label:"向上弹跳退出",value:"bounceOutUp"}]},{label:"渐显进入",value:"Fading Entrances",children:[{label:"渐显进入",value:"fadeIn"},{label:"向下渐显进入",value:"fadeInDown"},{label:"由屏幕外向下渐显进入",value:"fadeInDownBig"},{label:"向右显进入",value:"fadeInLeft"},{label:"由屏幕外向右渐显进入",value:"fadeInLeftBig"},{label:"向左渐显进入",value:"fadeInRight"},{label:"由屏幕外向左渐显进入",value:"fadeInRightBig"},{label:"向上渐显进入",value:"fadeInUp"},{label:"由屏幕外向上渐显进入",value:"fadeInUpBig"}]},{label:"渐隐退出",value:"Fading Exits",children:[{label:"渐隐退出",value:"fadeOut"},{label:"向下渐隐退出",value:"fadeOutDown"},{label:"向下渐隐退出屏幕外",value:"fadeOutDownBig"},{label:"向左渐隐退出",value:"fadeOutLeft"},{label:"向左渐隐退出屏幕外",value:"fadeOutLeftBig"},{label:"向右渐隐退出",value:"fadeOutRight"},{label:"向右渐隐退出屏幕外",value:"fadeOutRightBig"},{label:"向上渐隐退出",value:"fadeOutUp"},{label:"向上渐隐退出屏幕外",value:"fadeOutUpBig"}]},{label:"翻动",value:"Flippers",children:[{label:"翻动",value:"flip"},{label:"纵向翻动",value:"flipInX"},{label:"横向翻动",value:"flipInY"},{label:"立体纵向翻动",value:"flipOutX"},{label:"立体横向翻动",value:"flipOutY"}]},{label:"加速进出",value:"Lightspeed",children:[{label:"加速进入",value:"lightSpeedIn"},{label:"加速退出",value:"lightSpeedOut"}]},{label:"旋转渐显",value:"Rotating Entrances",children:[{label:"旋转渐显",value:"rotateIn"},{label:"左下角旋转渐显",value:"rotateInDownLeft"},{label:"旋转渐显",value:"右下角rotateInDownRight"},{label:"左上角旋转渐显",value:"rotateInUpLeft"},{label:"右上角旋转渐显",value:"rotateInUpRight"}]},{label:"旋转渐隐",value:"Rotating Exits",children:[{label:"旋转渐隐",value:"rotateOut"},{label:"左下角旋转渐隐",value:"rotateOutDownLeft"},{label:"左下角旋转渐隐",value:"rotateOutDownRight"},{label:"左上角旋转渐隐",value:"rotateOutUpLeft"},{label:"右上角旋转渐隐",value:"rotateOutUpRight"}]},{label:"平移进入",value:"Sliding Entrances",children:[{label:"向上平移进入",value:"slideInUp"},{label:"向下平移进入",value:"slideInDown"},{label:"向右平移进入",value:"slideInLeft"},{label:"向左平移进入",value:"slideInRight"}]},{label:"平移退出",value:"Sliding Exits",children:[{label:"向上平移退出",value:"slideOutUp"},{label:"向下平移退出",value:"slideOutDown"},{label:"向左平移退出",value:"slideOutLeft"},{label:"向右平移退出",value:"slideOutRight"}]},{label:"放大进入",value:"Zoom Entrances",children:[{label:"放大进入",value:"zoomIn"},{label:"向下放大进入",value:"zoomInDown"},{label:"向右放大进入",value:"zoomInLeft"},{label:"向左放大进入",value:"zoomInRight"},{label:"向上放大进入",value:"zoomInUp"}]},{label:"缩小退出",value:"Zoom Exits",children:[{label:"缩小退出",value:"zoomOut"},{label:"向下缩小退出",value:"zoomOutDown"},{label:"向左缩小退出",value:"zoomOutLeft"},{label:"向右缩小退出",value:"zoomOutRight"},{label:"向上缩小退出",value:"zoomOutUp"}]},{label:"特殊效果",value:"Specials",children:[{label:"悬挂",value:"hinge"},{label:"滚动进入",value:"rollIn"},{label:"滚动退出",value:"rollOut"}]}],P=/进|渐显/,T=/退|渐隐/,j={delay:0,mode:"both",infinite:!1};for(let Oe=0;Oe<A.length;Oe++){A[Oe].children.forEach((t=>{P.test(t.label)?B.in.value.push(e(e({},t),j)):T.test(t.label)?B.out.value.push(e(e({},t),j)):B.other.value.push(e(e({},t),j))}))}const X=["none","forwards","backwards","both"];var Y=n({name:"rightAnimate",setup(){const e=t(),l=g(!1),a=m((()=>e.getters.getCurrentComponent));return{activePane:"in",currentComponent:a,onSelectDialog:()=>{l.value=!0},animationTabs:B,onAnimation:(e,t)=>{e.target&&(e.target.classList.add(`animate__${t.value}`),setInterval((()=>{e.target.classList.remove(`animate__${t.value}`)}),3e3))},onAddAnimation:t=>{e.commit("addCurrentAnimation",t),l.value=!1},dialogVisible:l,onRunAnimate:()=>{k(a.value,e,document.querySelector(".activeComponent"))},deleteAnimate:t=>{e.commit("delCurrentAnimation",t)},mode:X}}});const $={class:"animates"},W=y("添加动画"),q=y("运行动画 "),F=h("i",{class:"el-icon-video-play"},null,-1),N=y("s ");Y.render=function(e,t,l,a,n,o){const r=v("el-button"),c=v("el-button-group"),m=v("el-input-number"),g=v("el-tooltip"),C=v("el-form-item"),I=v("el-option"),x=v("el-select"),w=v("el-switch"),V=v("el-form"),k=v("el-collapse-item"),_=v("el-collapse"),U=v("el-tab-pane"),O=v("el-tabs"),z=v("el-dialog");return s(),u(i,null,[h("div",$,[h(c,{style:{margin:"0 auto"}},{default:b((()=>[h(r,{type:"primary",size:"small",icon:"el-icon-plus",onClick:e.onSelectDialog},{default:b((()=>[W])),_:1},8,["onClick"]),h(r,{type:"primary",size:"small",onClick:e.onRunAnimate},{default:b((()=>[q,F])),_:1},8,["onClick"])])),_:1}),e.currentComponent.animates.length?(s(),u(_,{key:0,class:"lists",accordion:""},{default:b((()=>[(s(!0),u(i,null,p(e.currentComponent.animates,((t,l)=>(s(),u(k,{name:t.id},{title:b((()=>[y(d(t.label),1),h("i",{class:"el-icon-delete delete",onClick:t=>e.deleteAnimate(l)},null,8,["onClick"])])),default:b((()=>[h(V,{size:"mini","label-width":"96px"},{default:b((()=>[h(C,{label:"开始时间(秒):"},{default:b((()=>[h(g,{class:"item",effect:"light",content:"此时间是基于上个动画结束时间算起",placement:"top"},{default:b((()=>[h(m,{modelValue:t.delay,"onUpdate:modelValue":e=>t.delay=e,min:0,label:"开始时间"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),h(C,{label:"起始样式:"},{default:b((()=>[h(x,{modelValue:t.mode,"onUpdate:modelValue":e=>t.mode=e,placeholder:"起始样式"},{default:b((()=>[(s(!0),u(i,null,p(e.mode,(e=>(s(),u(I,{label:e,value:e},null,8,["label","value"])))),256)),N])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(C,{label:"无限循环:"},{default:b((()=>[h(w,{modelValue:t.infinite,"onUpdate:modelValue":e=>t.infinite=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["name"])))),256))])),_:1})):f("",!0)]),h(z,{"append-to-body":"",modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),width:"341px","show-close":!1,"custom-class":"animateSelect",top:"0"},{default:b((()=>[h(O,{modelValue:e.activePane,"onUpdate:modelValue":t[1]||(t[1]=t=>e.activePane=t)},{default:b((()=>[(s(!0),u(i,null,p(e.animationTabs,((t,l)=>(s(),u(U,{label:t.label,name:l,key:l,class:"animate-box"},{default:b((()=>[(s(!0),u(i,null,p(t.value,(t=>(s(),u("div",{key:t.value,class:"animate animate__animated",onMouseenter:l=>e.onAnimation(l,t),onClick:l=>e.onAddAnimation(t)},d(t.label),41,["onMouseenter","onClick"])))),128))])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])],64)};const H=[{label:"点击",value:"click"}],J=[{label:"跳转",value:"href"},{label:"弹窗",value:"alert"}],Z={event:"click",method:"href",href:"",dialog:{title:"",message:"",showCancelButton:!0}};var G=n({name:"rightEvent",setup(){const n=t(),o=g(!1);return{currentComponent:m((()=>n.getters.getCurrentComponent)),eventsSelect:H,eventMethod:J,dialogVisible:o,addEvent:()=>{n.commit("addCurrentEvent",l(e(e({},Z),{id:a()})))},onRemoveEvent:e=>{n.commit("delCurrentEvent",e)}}}});const K=c("data-v-743a55a3");o("data-v-743a55a3");const Q=y("添加事件"),ee=h("span",{style:{color:"#606266","font-size":"13px"}},"弹窗信息",-1);r();const te=K(((e,t,l,a,n,o)=>{const r=v("el-button"),d=v("el-option"),c=v("el-select"),m=v("el-form-item"),g=v("el-input"),b=v("el-divider"),y=v("el-switch"),C=v("el-form"),I=v("el-card");return s(),u(i,null,[h(r,{type:"primary",size:"mini",onClick:e.addEvent},{default:K((()=>[Q])),_:1},8,["onClick"]),(s(!0),u(i,null,p(e.currentComponent.events,((t,l)=>(s(),u(I,{key:t.id,class:"event","body-style":{padding:"15px 15px 5px"}},{default:K((()=>[h(C,{"label-width":"80px",size:"mini"},{default:K((()=>[h(m,{label:"事件名称"},{default:K((()=>[h(c,{modelValue:t.event,"onUpdate:modelValue":e=>t.event=e,placeholder:"请选择事件"},{default:K((()=>[(s(!0),u(i,null,p(e.eventsSelect,((e,t)=>(s(),u(d,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(m,{label:"执行事件"},{default:K((()=>[h(c,{modelValue:t.method,"onUpdate:modelValue":e=>t.method=e,placeholder:"请选择执行事件"},{default:K((()=>[(s(!0),u(i,null,p(e.eventMethod,((e,t)=>(s(),u(d,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),"href"===t.method?(s(),u(m,{key:0,label:"跳转链接"},{default:K((()=>[h(g,{modelValue:t.href,"onUpdate:modelValue":e=>t.href=e,placeholder:"请输入跳转链接"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):f("",!0),"alert"===t.method?(s(),u(i,{key:1},[h(b,{"content-position":"center"},{default:K((()=>[ee])),_:1}),h(m,{label:"标题"},{default:K((()=>[h(g,{modelValue:t.dialog.title,"onUpdate:modelValue":e=>t.dialog.title=e,placeholder:"请输入弹窗标题"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(m,{label:"内容"},{default:K((()=>[h(g,{modelValue:t.dialog.message,"onUpdate:modelValue":e=>t.dialog.message=e,type:"textarea",placeholder:"请输入弹窗内容"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(m,{label:"取消按钮"},{default:K((()=>[h(y,{modelValue:t.dialog.showCancelButton,"onUpdate:modelValue":e=>t.dialog.showCancelButton=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)],64)):f("",!0)])),_:2},1024),h("i",{class:"el-icon-delete del",onClick:t=>e.onRemoveEvent(l)},null,8,["onClick"])])),_:2},1024)))),128))],64)}));G.render=te,G.__scopeId="data-v-743a55a3";var le=n({name:"tzRight",components:{rightStyle:S,rightAnimate:Y,rightEvent:G},setup(){const e=g("sx"),l=t();return{currentComponent:m((()=>l.getters.getCurrentComponent)),activePane:e}}});const ae=c("data-v-5563ba17");o("data-v-5563ba17");const ne={class:"right"};r();const oe=ae(((e,t,l,a,n,o)=>{const r=v("right-style"),i=v("el-tab-pane"),p=v("right-animate"),d=v("right-event"),c=v("el-tabs");return s(),u("div",ne,[h(c,{modelValue:e.activePane,"onUpdate:modelValue":t[1]||(t[1]=t=>e.activePane=t)},{default:ae((()=>[h(i,{label:"属性",name:"sx"},{default:ae((()=>[h(r)])),_:1}),e.currentComponent?(s(),u(i,{key:0,label:"动画",name:"dh"},{default:ae((()=>[h(p)])),_:1})):f("",!0),e.currentComponent?(s(),u(i,{key:1,label:"事件",name:"事件"},{default:ae((()=>[h(d)])),_:1})):f("",!0)])),_:1},8,["modelValue"])])}));var re,se;le.render=oe,le.__scopeId="data-v-5563ba17",(se=re||(re={})).lt="lt",se.rt="rt",se.lb="lt",se.rb="rt",se.l="l",se.t="t",se.r="r",se.b="b";const ue={lt:{left:"-4px",top:"-4px",cursor:"nw-resize"},rt:{right:"-4px",top:"-4px",cursor:"ne-resize"},lb:{left:"-4px",bottom:"-4px",cursor:"sw-resize"},rb:{right:"-4px",bottom:"-4px",cursor:"se-resize"},l:{left:"-4px",top:"50%",transform:"translateY(-50%)",cursor:"w-resize"},t:{left:"50%",transform:"translateX(-50%)",top:"-4px",cursor:"n-resize"},r:{right:"-4px",top:"50%",transform:"translateY(-50%)",cursor:"e-resize"},b:{left:"50%",transform:"translateX(-50%)",bottom:"-4px",cursor:"s-resize"}},ie={lt(t,l,a,n){const o=t.y-l.y,r=t.x-l.x,s=parseInt(a.left)+parseInt(a.width),u=parseInt(a.top)+parseInt(a.height);let i=parseInt(a.left)-r,p=parseInt(a.top)-o,d=parseInt(a.width)+r,c=parseInt(a.height)+o;return d=d<2?2:d>s?s:d,c=c<2?2:c>u?u:c,i=i<0?0:i>s-2?s-2:i,p=p<0?0:p>u-2?u-2:p,e(e({},a),{left:i+"px",top:p+"px",height:c+"px",width:d+"px"})},rt(t,l,a,n){const o=t.y-l.y,r=l.x-t.x,s=parseInt(n.width)-parseInt(a.left),u=parseInt(a.top)+parseInt(a.height);let i=parseInt(a.top)-o,p=parseInt(a.width)+r,d=parseInt(a.height)+o;return p=p<2?2:p>s?s:p,d=d<2?2:d>u?u:d,i=i<0?0:i>u-2?u-2:i,e(e({},a),{top:i+"px",height:d+"px",width:p+"px"})},lb(t,l,a,n){const o=l.y-t.y,r=t.x-l.x,s=parseInt(a.left)+parseInt(a.width),u=parseInt(n.height)-parseInt(a.top);let i=parseInt(a.left)-r,p=parseInt(a.width)+r,d=parseInt(a.height)+o;return p=p<2?2:p>s?s:p,d=d<2?2:d>u?u:d,i=i<0?0:i>s-2?s-2:i,e(e({},a),{left:i+"px",height:d+"px",width:p+"px"})},rb(t,l,a,n){const o=l.y-t.y,r=l.x-t.x,s=parseInt(n.width)-parseInt(a.left),u=parseInt(n.height)-parseInt(a.top);let i=parseInt(a.width)+r,p=parseInt(a.height)+o;return i=i<2?2:i>s?s:i,p=p<2?2:p>u?u:p,e(e({},a),{height:p+"px",width:i+"px"})},l(t,l,a,n){const o=t.x-l.x,r=parseInt(a.left)+parseInt(a.width);let s=parseInt(a.left)-o,u=parseInt(a.width)+o;return u=u<2?2:u>r?r:u,s=s<0?0:s>r-2?r-2:s,e(e({},a),{left:s+"px",width:u+"px"})},t(t,l,a,n){const o=t.y-l.y,r=parseInt(a.top)+parseInt(a.height);let s=parseInt(a.top)-o,u=parseInt(a.height)+o;return u=u<2?2:u>r?r:u,s=s<0?0:s>r-2?r-2:s,e(e({},a),{top:s+"px",height:u+"px"})},r(t,l,a,n){const o=l.x-t.x;let r=parseInt(a.width)+o;const s=parseInt(n.width)-parseInt(a.left);return r=r<2?2:r>s?s:r,e(e({},a),{width:r+"px"})},b(t,l,a,n){const o=l.y-t.y;let r=parseInt(a.height)+o;const s=parseInt(n.height)-parseInt(a.top);return r=r<2?2:r>s?s:r,e(e({},a),{height:r+"px"})}};function pe(){const l=t();return(t,a)=>{const n=m((()=>l.getters.getCanvas)),o=m((()=>l.getters.getCurrentComponent)).value,r={x:a.clientX,y:a.clientY},s=e({},o.style);s.width.endsWith("%")&&(s.width=parseInt(n.value.style.width)*parseInt(s.width)/100+"px"),s.height.endsWith("%")&&(s.height=parseInt(n.value.style.height)*parseInt(s.height)/100+"px");const u=e=>{e.stopPropagation();const a={x:e.clientX,y:e.clientY},o=function(e,t,l,a,n){return ie[e](t,l,a,n)}(t,r,a,s,n.value.style);o.width.endsWith===n.value.style.width&&(o.width="100%"),o.height===n.value.style.height&&(o.height="100%"),l.commit("updateCurrentStyle",o)},i=e=>{e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",i)}}const de=e=>{const t=parseInt(e.style.left),l=parseInt(e.style.top);return{left:t,top:l,right:t+parseInt(e.style.width),bottom:l+parseInt(e.style.height),xcenter:l+parseInt(e.style.height)/2,ycenter:t+parseInt(e.style.width)/2}},ce=(e,t)=>Math.abs(e-t)<=3;var me=n({name:"dragShape",setup(){const l=t(),a=g(null),n=g(null),o=m((()=>l.getters.getCurrentComponent)),r=pe();return{xline:a,yline:n,pointStyle:ue,currentComponentConfig:o,onPointMouseDown:r,onClickPoint:()=>{},onShapeMove:t=>{const o=function(t,l){const a=m((()=>l.getters.getCanvas)).value.style,n=m((()=>l.getters.getCurrentComponent)).value,o=e({},n.style),r=t.clientX,s=t.clientY;return function(t){t.stopPropagation();const n=t.clientX,u=t.clientY,i=n-r,p=u-s,d=parseInt(o.width),c=parseInt(o.height),m=parseInt(a.width)-d/2,v=parseInt(a.height)-c/2;let f=parseInt(o.left)+i,g=parseInt(o.top)+p;f=-f>d/2?-d/2:f>m?m:f,g=-g>c/2?-c/2:g>v?v:g;const h=e(e({},o),{left:f+"px",top:g+"px"});l.commit("updateCurrentStyle",h)}}(t,l),r=(e=>{const t=m((()=>e.getters.getComponents)).value,l=m((()=>e.getters.getCurrentComponent)).value,a=[],n={left:[0,parseInt(e.getters.getCanvas.style.width)],top:[0,parseInt(e.getters.getCanvas.style.height)]};return t.forEach((e=>{e!==l&&a.push(de(e))})),a.forEach((e=>{n.left.push(e.left,e.ycenter,e.right),n.top.push(e.top,e.xcenter,e.bottom)})),(t,a)=>{const o=de(l),r={},s={left:[o.left,o.ycenter,o.right],top:[o.top,o.xcenter,o.bottom],left2line:[0,parseInt(l.style.width)/2,parseInt(l.style.width)],top2line:[0,parseInt(l.style.height)/2,parseInt(l.style.height)]};for(var u=0;u<s.left.length;u++){const e=s.left[u];if(r.left=n.left.find((t=>ce(e,t))),void 0!==r.left){r.leftLine=r.left,r.left-=s.left2line?s.left2line[u]:0;break}}for(u=0;u<s.top.length;u++){const e=s.top[u];if(r.top=n.top.find((t=>ce(e,t))),void 0!==r.top){r.topLine=r.top,r.top-=s.top2line?s.top2line[u]:0;break}}a&&t&&(a.style.display="none",t.style.display="none",void 0!==r.left&&(a.style.display="block",a.style.left=r.leftLine+"px",e.commit("updateCurrentStyle",{left:r.left+"px"})),void 0!==r.top&&(t.style.display="block",t.style.top=r.topLine+"px",e.commit("updateCurrentStyle",{top:r.top+"px"})))}})(l),s=e=>{o(e),r(a.value,n.value)},u=()=>{const e=a.value,t=n.value;e&&(e.style.display="none"),t&&(t.style.display="none"),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",u)}}}});const ve=c("data-v-0a6f1c7f");o("data-v-0a6f1c7f");const fe={class:"line"},ge={class:"xline",ref:"xline"},he={class:"yline",ref:"yline"};r();const be=ve(((e,t,l,a,n,o)=>(s(),u(i,null,[h("div",fe,[h("div",ge,null,512),h("div",he,null,512)]),h("div",{class:"dragWrap",style:e.currentComponentConfig.style,onMousedown:t[2]||(t[2]=C(((...t)=>e.onShapeMove&&e.onShapeMove(...t)),["stop","prevent"])),onClick:t[3]||(t[3]=C((e=>e),["stop","prevent"]))},[(s(!0),u(i,null,p(Object.keys(e.pointStyle),(l=>(s(),u("div",{class:l,style:e.pointStyle[l],onMousedown:C((t=>e.onPointMouseDown(l,t)),["stop","prevent"]),onClick:t[1]||(t[1]=C(((...t)=>e.onClickPoint&&e.onClickPoint(...t)),["stop","prevent"]))},null,46,["onMousedown"])))),256))],36)],64))));me.render=be,me.__scopeId="data-v-0a6f1c7f";var ye=n({name:"tzContent",components:{componentBox:_,dragShape:me},setup(){const e=t(),l=m((()=>e.getters.getComponents)),n=m((()=>e.getters.getCurrentComponent));return{canvasStyle:m((()=>e.getters.getCanvas.style)),components:l,handleDrop:t=>{t.preventDefault();const l=JSON.parse(t.dataTransfer.getData("componentType"));l.style.top=t.offsetY-l.style.top+"px",l.style.left=t.offsetX-l.style.left+"px",l.id=a(),e.commit("addComponents",l)},handleDragOver:e=>{e.preventDefault()},onComponent:t=>{"content"!==t&&l?e.commit("addCurrentComponent",l.value[t]):e.commit("addCurrentComponent",null)},deleteComponent:()=>{e.commit("deleteCurrentComponent")},currentComponent:n}}});const Ce=c("data-v-7d1d79d5");o("data-v-7d1d79d5");const Ie={class:"content"};r();const xe=Ce(((e,t,l,a,n,o)=>{const r=v("component-box"),d=v("drag-shape");return s(),u("div",Ie,[h("div",{class:"canvas",onDrop:t[1]||(t[1]=(...t)=>e.handleDrop&&e.handleDrop(...t)),onDragover:t[2]||(t[2]=(...t)=>e.handleDragOver&&e.handleDragOver(...t)),onClick:t[3]||(t[3]=C((t=>e.onComponent("content")),["stop"])),style:e.canvasStyle,tabIndex:"0",onKeyup:t[4]||(t[4]=x(((...t)=>e.deleteComponent&&e.deleteComponent(...t)),["delete"]))},[(s(!0),u(i,null,p(e.components,((t,l)=>(s(),u(r,{key:t.id,"components-config":t,index:l,onOnComponent:e.onComponent},{default:Ce((()=>[(s(),u(I(t.component),t.props,null,16))])),_:2},1032,["components-config","index","onOnComponent"])))),128)),e.currentComponent?(s(),u(d,{key:0})):f("",!0)],36)])}));ye.render=xe,ye.__scopeId="data-v-7d1d79d5";const we={tzBox:{title:"矩形",style:{width:"100px",height:"100px"}},tzButton:{title:"按钮"},tzText:{title:"文本"},VanButton:{title:"vant-按钮",props:{text:"按钮",block:!0}},VanNavBar:{title:"nav导航栏",style:{width:"100%"},props:{title:"标题",leftText:"返回",zIndex:1}}};var Ve=n({name:"Index",components:{tzLeft:U,tzContent:ye,tzRight:le},setup(){const l=t(),a=w(),n=(t=>{const l=[],a=Object.keys(t).filter((e=>we[e])),n=e=>{const t=e.props;let l={};if(!e.props)return[];for(const a of Object.keys(t))l[a]="function"==typeof t[a]?t[a]():t[a].default;return l};for(let o=0;o<a.length;o++){const r=a[o],s=t[r],u=we[r]?we[r]:{};l.push(e(e({component:s.name},u),{props:e(e({},n(s)),u.props?u.props:{}),style:e({},u.style?u.style:{}),animates:[]}))}return l})(a&&a.appContext.components),o=l.getters.getCanvas;return{config:n,open:()=>{const e=o.style.width,t=o.style.height,n=l.getters.getComponents;null==a||a.appContext.config.globalProperties.$alert(`<div class='box' style="width:${e};height:${t}"><iframe src='/drag-demo/dist/index.html#/iframe' class="iframe" ></iframe></div>`,"如果页面没有效果,请关闭弹窗,重新点击预览",{showConfirmButton:!1,showClose:!1,customClass:"iframeBox",closeOnClickModal:!0,dangerouslyUseHTMLString:!0,callback(){}});const r=document.querySelector(".iframe");r.onload=()=>{r.contentWindow&&r.contentWindow.postMessage(V(n),"*")}}}}});const ke=c("data-v-2a0347d0");o("data-v-2a0347d0");const _e=y("预览");r();const Ue=ke(((e,t,l,a,n,o)=>{const r=v("tz-left"),p=v("tz-content"),d=v("tz-right"),c=v("el-button");return s(),u(i,null,[h(r,{"component-config":e.config},null,8,["component-config"]),h(p),h(d),h(c,{type:"primary",class:"view",onClick:e.open},{default:ke((()=>[_e])),_:1},8,["onClick"])],64)}));Ve.render=Ue,Ve.__scopeId="data-v-2a0347d0";export default Ve;
